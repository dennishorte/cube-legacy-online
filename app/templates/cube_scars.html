{% extends "cube_base.html" %}

{% block content %}
  {{ super() }}

  <div class="row">

    <!-- Table of existing scars -->
    <div class="col col-md-8">
      <h4>Scars</h4>
      <table class="table table-sm">
        <thead class="thead thead-light">
          <th>text</th>
          <th>restrictions</th>
          <th>creator</th>
          <th>card</th>
        </thead>
        <tbody>
          {% for scar in cube.scars %}
            <tr>
              <td>{{ scar.text }}</td>
              <td>{{ scar.restrictions }}</td>
              <td>{{ scar.created_by.name }}</td>

              {% if scar.applied_to %}
                <td>
                  <a href="{{ url_for('card_editor', card_id=scar.applied_to_id) }}">
                    {{ scar.applied_to.name() }}
                  </a>
                </td>
              {% else %}
                <td></td>
              {% endif %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <!-- END: Table of existing scars -->

    <!-- New scar form -->
    <div class="col col-md-4 bg-light border p-2">
      <h4>Create Scar</h4>
      <form action="{{ url_for('cube_scars_add', cube_id=cube.id) }}" method="post" novalidate>
        {{ form.hidden_tag() }}
        <div class="form-group">
          {{ form.text.label }}
          {{ form.text(class='form-control', rows=8) }}
        </div>
        <div class="form-group">
          {{ form.restrictions.label }}
          {{ form.restrictions(class='form-control') }}
        </div>
        <div class="row">
          <div class="col">
            <p>{{ form.submit(class='btn btn-primary') }}</p>
          </div>
          <div class="col">
            <div class="form-group">
              {{ form.update_as.label }}
              {{ form.update_as(class='form-control') }}
            </div>
          </div>
        </div>
      </form>
    </div>
    <!-- END: New scar form -->
  </div>
{% endblock content %}
