{% extends "base.html" %}

{% block title %}
  Cube Legacy Online
{% endblock %}

{% block content %}
  <div class="row mb-3">
    <div class="col">
      <a href="#newDraftModal" data-toggle="modal">new draft</a>
      /
      <a href="#newCubeModal" data-toggle="modal">new cube</a>
    </div>
  </div>
  
  <div class="row mb-5" >
    
    <!-- User drafts and achievements -->
    <div id="drafts" class="col col-md-6">
      <h4>Drafts</h4>
      <div id="active" class="border bg-light p-2">
        <p>Active Drafts</p>
        <ul class="list-unstyled ml-4">
          {% for p in active %}
            <li>
              <a href="/draft/{{p.draft.id}}">{{ p.draft.name }}</a>
              {% if p.waiting_pack() %}
                <span class="badge badge-pill badge-success">*</span>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
      <div id="complete" class="border bg-light p-2 mt-2">
        <p>Completed Drafts</p>
        <ul class="list-unstyled ml-4">
          {% for p in complete %}
            <li><a href="/draft/{{p.draft.id}}">{{ p.draft.name }}</a></li>
          {% endfor %}
        </ul>
      </div>

      <!-- List of Achievements -->
      <h4 class="mt-4">My Achievements</h4>
      <div id="claimedAchievements" class="border bg-light p-2">
        <p>Claimed Achievements</p>
        <ul class="list-unstyled ml-4">
          {% for achievement in achievements_unfinished %}
            <li>
              <a href="{{ url_for('achievement_view', achievement_id=achievement.id) }}">
                {{ achievement.name }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>

      <div id="completedAchievements" class="border bg-light p-2 mt-2">
        <p>Finalized Achievements</p>
        <ul class="list-unstyled ml-4">
          {% for achievement in achievements_finished %}
            <li>
              <a href="{{ url_for('achievement_view', achievement_id=achievement.id) }}">
                {{ achievement.name }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>
      <!-- END: List of Achievements -->

    </div>
    <!-- END: User drafts and achievements -->

    <!-- Right side column -->
    <div class="col col-md-6">
      <h4>Cubes</h4>
      <div id="activeCubes" class="border p-2 bg-light">
        <ul class="list-unstyled ml-4 mt-3">
          {% for cube in cubes|sort(attribute='name') %}
            <li>
              <a href="{{ url_for('cube_cards', cube_id=cube.id) }}">{{ cube.name }}</a>
            </li>
          {% endfor %}
        </ul>
      </div>      
    </div>
    <!-- END: Right side column -->

  </div>

  <!-- New Cube Modal -->
  <div class="modal fade" id="newCubeModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">New Cube</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>          
        </div>
        
        <div class="modal-body">
          <form action="{{ url_for('cubes_new') }}" method="post" novalidate>
            {{ new_cube_form.hidden_tag() }}
            <div class="form-group">
              {{ new_cube_form.name.label }}
              {{ new_cube_form.name(class='form-control') }}
            </div>
            <div class="form-group">
              {{ new_cube_form.style.label }}
              {{ new_cube_form.style(class="list-unstyled") }}
            </div>
            <p>{{ new_cube_form.submit(class="btn btn-primary") }}</p>
          </form>

        </div>
      </div>
    </div>
  </div>
  <!-- END: New Cube Modal -->

  <!-- New Draft Modal -->
  <div class="modal fade" id="newDraftModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">New Draft</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>          
        </div>
        
        <div class="modal-body">

          <form action="/draft/new" method="post" novalidate>
            {{ new_draft_form.hidden_tag() }}
            <div class="form-group">
              {{ new_draft_form.name.label }}
              {{ new_draft_form.name(class='form-control') }}
            </div>
            <div class="form-group">
              {{ new_draft_form.cube.label }}
              {{ new_draft_form.cube(class='form-control') }}
            </div>
            <div class="form-group">
              {{ new_draft_form.packsize.label }}
              {{ new_draft_form.packsize(class='form-control') }}
            </div>
            <div class="form-group">
              {{ new_draft_form.numpacks.label }}
              {{ new_draft_form.numpacks(class='form-control') }}
            </div>
            <div class="form-group">
              {{ new_draft_form.scar_rounds.label }}
              {{ new_draft_form.scar_rounds(class='form-control') }}
            </div>
            <div class="form-group">
              {{ new_draft_form.players.label }}
              {{ new_draft_form.players(class='form-control', size=6) }}
            </div>
            <div class="form-group">
              {{ new_draft_form.submit() }}
            </div>
          </form>          

        </div>
      </div>
    </div>
  </div>
  <!-- END: New Draft Modal -->

{% endblock %}
