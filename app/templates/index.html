{% extends "base.html" %}

{% block title_suffix %}
  Home
{% endblock %}

{% block title %}
  Cube Legacy Online
{% endblock %}

{% block content %}
  <div class="row mb-3">
    <div class="col">
      <a href="#newDraftModal" data-toggle="modal">new draft</a>
      /
      <a href="#newCubeModal" data-toggle="modal">new cube</a>
      /
      <a href="#newGameModal" data-toggle="modal">new game</a>
    </div>
  </div>

  <div class="row" >
    <div class="col">
      <div>
        <h3>Drafts</h3>
        <div id="active" class="framed">
          <p>Active Drafts</p>
          <ul class="list-unstyled ml-4">
            {% for p in active %}
              <li>
                <a href="/draft/{{p.draft.id}}">{{ p.draft.name }}</a>
                {% if p.waiting_pack() %}
                  <span class="badge badge-pill badge-success">*</span>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </div>

        <div id="complete" class="framed">
          <p>Completed Drafts</p>
          <ul class="list-unstyled ml-4">
            {% for p in complete %}
              <li><a href="/draft/{{p.draft.id}}">{{ p.draft.name }}</a></li>
            {% endfor %}
          </ul>
        </div>
      </div>

      <div class="mt-2">
        <h3>Games</h3>
        <div class="framed">
          <ul class="list-unstyled ml-4 mt-3">
            {% for game in games %}
              <li>
                <a href="{{ url_for('game', game_id=game.id) }}">
                  {{ game.state.name }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>

    </div>

    <div class="col">
      <!-- Cube List -->
      <div>
        <h3>Cubes</h3>
        <div id="activeCubes" class="framed">
          <ul class="list-unstyled ml-4 mt-3">
            {% for cube in cubes|sort(attribute='name') %}
              <li>
                <a href="{{ url_for('cube_cards', cube_id=cube.id) }}">{{ cube.name }}</a>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      <!-- END: Cube List -->

      <!-- Users List -->
      <div class="mt-2">
        <h3>Users</h3>
        <div class="framed">
          <ul class="list-unstyled mb-0 ml-4">
            {% for user in users %}
              <li>
                <a href="{{ url_for('user_profile', user_id=user.id) }}">
                  {{ user.name }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      <!-- END: Users List -->

    </div>

    <div class="col">

      <!-- List of Achievements -->
      <div>
        <h3>My Achievements</h3>
        <div id="claimedAchievements" class="framed">
          <p>Claimed Achievements</p>
          <ul class="list-unstyled ml-4">
            {% for achievement in achievements_unfinished %}
              <li>
                <a href="{{ url_for('achievement_view', achievement_id=achievement.id) }}">
                  {{ achievement.name }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>

        <div id="completedAchievements" class="framed">
          <p>Finalized Achievements</p>
          <ul class="list-unstyled ml-4">
            {% for achievement in achievements_finished %}
              <li>
                <a href="{{ url_for('achievement_view', achievement_id=achievement.id) }}">
                  {{ achievement.name }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      <!-- END: List of Achievements -->


      <!-- Tools -->
      <div class="mt-2">
        <h3>Tools</h3>
        <div class="framed">
          <h5>Pack Generator</h5>
          <form action="{{ url_for('make_pack') }}" method="post" novalidate>
            {{ pack_maker_form.hidden_tag() }}
            <div class="form-group row">
              <div class="col col-2 pl-4">
                {{ pack_maker_form.obj_type.label(class='col-form-label') }}
              </div>
              <div class="col">
                {{ pack_maker_form.obj_type(class='form-control') }}
              </div>
            </div>
            <div class="form-group row">
              <div class="col col-2 pl-4">
                {{ pack_maker_form.cube_name.label(class='col-form-label') }}
              </div>
              <div class="col">
                {{ pack_maker_form.cube_name(class='form-control') }}
              </div>
            </div>
            <div class="form-group row">
              <div class="col col-2 pl-4">
                {{ pack_maker_form.count.label(class='col-form-label') }}
              </div>
              <div class="col">
                {{ pack_maker_form.count(class='form-control') }}
              </div>
            </div>
            {{ pack_maker_form.submit(class='btn btn-secondary ml-2') }}
          </form>
        </div>
      </div>
      <!-- END: Tools -->

    </div>
  </div>


  <!-- New Cube Modal -->
  <div class="modal fade" id="newCubeModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">New Cube</h5>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <div class="modal-body">
          <form action="{{ url_for('cubes_new') }}" method="post" novalidate>
            {{ new_cube_form.hidden_tag() }}
            <div class="form-group">
              {{ new_cube_form.name.label }}
              {{ new_cube_form.name(class='form-control') }}
            </div>
            <div class="form-group">
              {{ new_cube_form.style.label }}
              {{ new_cube_form.style(class="list-unstyled") }}
            </div>
            <p>{{ new_cube_form.submit(class="btn btn-primary") }}</p>
          </form>

        </div>
      </div>
    </div>
  </div>
  <!-- END: New Cube Modal -->

  <!-- New Draft Modal -->
  <div class="modal fade" id="newDraftModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">New Draft</h5>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <div class="modal-body">

          <ul class="nav nav-tabs justify-content-around">
            <li class="active">
              <a  href="#newCubeDraftTab" data-toggle="tab">Cube Draft</a>
            </li>
            <li>
              <a  href="#newSetDraftTab" data-toggle="tab">Set Draft</a>
            </li>
          </ul>

	  <div class="tab-content clearfix">
	    <div class="tab-pane active" id="newCubeDraftTab">

              <form action="{{ url_for('draft_new') }}" method="post" novalidate>
                {{ new_draft_form.hidden_tag() }}
                <div class="form-group">
                  {{ new_draft_form.name.label }}
                  {{ new_draft_form.name(class='form-control') }}
                </div>
                <div class="form-group">
                  {{ new_draft_form.cube.label }}
                  {{ new_draft_form.cube(class='form-control') }}
                </div>
                <div class="form-group">
                  {{ new_draft_form.packsize.label }}
                  {{ new_draft_form.packsize(class='form-control') }}
                </div>
                <div class="form-group">
                  {{ new_draft_form.numpacks.label }}
                  {{ new_draft_form.numpacks(class='form-control') }}
                </div>
                <div class="form-group">
                  {{ new_draft_form.scar_rounds.label }}
                  {{ new_draft_form.scar_rounds(class='form-control') }}
                </div>
                <div class="form-group">
                  {{ new_draft_form.players.label }}
                  {{ new_draft_form.players(class='form-control', size=6) }}
                </div>
                <div class="form-group">
                  {{ new_draft_form.submit() }}
                </div>
              </form>

	    </div>

	    <div class="tab-pane" id="newSetDraftTab">

              <form action="{{ url_for('draft_new_set') }}" method="post" novalidate>
                {{ new_set_draft_form.hidden_tag() }}
                <div class="form-group">
                  {{ new_set_draft_form.name.label }}
                  {{ new_set_draft_form.name(class='form-control') }}
                </div>
                <div class="form-group">
                  {{ new_set_draft_form.cube.label }}
                  {{ new_set_draft_form.cube(class='form-control') }}
                </div>
                <div class="form-group">
                  {{ new_set_draft_form.style.label }}
                  {{ new_set_draft_form.style(class='form-control') }}
                </div>
                <div class="form-group">
                  {{ new_set_draft_form.players.label }}
                  {{ new_set_draft_form.players(class='form-control', size=6) }}
                </div>
                <div class="form-group">
                  {{ new_set_draft_form.submit() }}
                </div>
              </form>

	    </div>

          </div>

        </div>
      </div>
    </div>
  </div>
  <!-- END: New Draft Modal -->

  <!-- New Game Modal -->
  <div class="modal fade" id="newGameModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">New Gane</h5>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <div class="modal-body">
          <form action="{{ url_for('game_new') }}" method="post" novalidate>
            {{ game_form.hidden_tag() }}
            <div class="form-group">
              {{ game_form.name.label }}
              {{ game_form.name(class='form-control') }}
            </div>
            <div class="form-group">
              {{ game_form.players.label }}
              {{ game_form.players(class='form-control', size=6) }}
            </div>
            <div class="form-group">
              {{ game_form.submit() }}
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>
  <!-- END: New Game Modal -->

{% endblock %}
